<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<script>(function(){'use strict';(function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.hasOwnProperty('polyfillWrapFlushCallback'))return;const a=HTMLElement;window.HTMLElement=function(){return Reflect.construct(a,[],this.constructor)},HTMLElement.prototype=a.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,a);})();}());</script><!-- via https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.0.4/custom-elements-es5-adapter.js -->
<script crossorigin src='https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.0.4/webcomponents-loader.js'></script>
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src='../dist/react-web-components.umd.js'></script>
</head>
<body>
  <h1>Web components test</h1>
  <x-app></x-app>
  <script>
    const h = React.createElement
    const Greeter = ({ name }) => {
      return h('div', { style: { border: 'solid 1px #ccc' } }, 'Oh hello, ', name, '!')
    }

    class App extends React.Component {
      constructor () {
        super()
        this.state = { name: '...' }
      }

      componentDidMount () {
        setInterval(() => {
          this.setState({ name: this.getRandomName() })
        }, 300)
      }

      getRandomName () {
        const names = ['Jason', 'James', 'Jessie', 'Janice', 'Jack', 'Jordan']
        return names[Math.round(Math.random() * (names.length - 1))]
      }

      render () {
        return h('div', {},
          'Greeting ', this.state.name, ':',
          h('x-greeter', { 'props-json': JSON.stringify({ name: this.state.name }) })
        )
      }
    }

    ReactWebComponents.define({
      'x-greeter': Greeter,
      'x-app': App
    })
  </script>
</body>
</html>
